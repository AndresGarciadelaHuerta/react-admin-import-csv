(this["webpackJsonptest-ra"]=this["webpackJsonptest-ra"]||[]).push([[0],{591:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(10),a=n(673);t.ImportButton=a.ImportButton,t.default=r.connect()(a.ImportButton)},664:function(e,t,n){e.exports=n(968)},673:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,l){function o(e){try{i(r.next(e))}catch(t){l(t)}}function u(e){try{i(r.throw(e))}catch(t){l(t)}}function i(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,u)}i((r=r.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,r,a,l,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return l={next:u(0),throw:u(1),return:u(2)},"function"===typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function u(l){return function(u){return function(l){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&l[0]?r.return:l[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,l[1])).done)return a;switch(r=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,r=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===l[0]||2===l[0])){o=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){o.label=l[1];break}if(6===l[0]&&o.label<a[1]){o.label=a[1],a=l;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(l);break}a[2]&&o.ops.pop(),o.trys.pop();continue}l=t.call(e,o)}catch(u){l=[6,u],r=0}finally{n=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,u])}}},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=l(n(0)),u=n(305),i=l(n(246)),c=n(305),s=n(943),f=n(48);t.ImportButton=function(e){var t=e.resource,n=e.parseConfig,l=e.logging;if(l&&console.log({props:e}),!t)throw new Error("the 'resource' prop was empty, did you pass in the {...props} to the ImportButton?");var d=o.default.useState(!1),p=d[0],m=d[1],h=o.default.useState(null),v=h[0],b=h[1],E=o.default.useState(null),y=E[0],g=E[1],w=o.default.useState(null),_=w[0],x=w[1],k=function(){m(!1)},C=c.useNotify(),B=c.useDataProvider();return o.default.createElement(o.default.Fragment,null,o.default.createElement(u.Button,{color:"primary",component:"span",label:"Import",onClick:function(){m(!0)}},o.default.createElement(i.default,{style:{transform:"rotate(180deg)",fontSize:"20"}})),o.default.createElement(f.Dialog,{open:p,onClose:k,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},o.default.createElement(f.DialogTitle,{id:"alert-dialog-title"},'Import to "',t,'"'),o.default.createElement(f.DialogContent,null,o.default.createElement("div",{id:"alert-dialog-description",style:{fontFamily:"sans-serif"}},o.default.createElement("p",{style:{margin:"0px"}},"Data file requirements"),o.default.createElement("ol",null,o.default.createElement("li",null,"Must be a '.csv' or '.tsv' file"),o.default.createElement("li",null,"Must contain an 'id' column")),o.default.createElement(f.Button,{variant:"contained",component:"label"},o.default.createElement("span",null,"Choose File"),o.default.createElement(i.default,{style:{transform:"rotate(180deg)",fontSize:"20"}}),o.default.createElement("input",{type:"file",style:{display:"none"},onChange:function(e){return r(void 0,void 0,void 0,(function(){var t,r,o;return a(this,(function(a){switch(a.label){case 0:t=e.target.files&&e.target.files[0],b(t.name),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,s.processCsvFile(t,n)];case 2:if((r=a.sent()).some((function(e){return!e.id})))throw new Error('Some rows have no value for the "id" column');return l&&console.log({values:r}),g(r),x(null),[3,4];case 3:return o=a.sent(),console.error(o),g(null),x(o.toString()),[3,4];case 4:return[2]}}))}))},accept:".csv,.tsv,.txt"})),!!v&&o.default.createElement("p",{style:{marginBottom:"0px"}},"Processed: ",o.default.createElement("strong",null,v)),!!y&&o.default.createElement("p",{style:{margin:"0px"}},"Row Count: ",o.default.createElement("strong",null,y.length)),!!_&&o.default.createElement("p",{style:{margin:"0px",color:"red"}},_))),o.default.createElement(f.DialogActions,null,o.default.createElement(f.Button,{onClick:k},o.default.createElement("span",null,"Cancel")),o.default.createElement(f.Button,{disabled:!y,onClick:function(){return r(void 0,void 0,void 0,(function(){var e;return a(this,(function(n){switch(n.label){case 0:m(!1),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,Promise.all(y.map((function(e){return B.create(t,{data:e})})))];case 2:return n.sent(),C("Imported "+v),[3,4];case 3:return e=n.sent(),C("Error importing "+v+", "+e),[3,4];case 4:return[2]}}))}))},color:"secondary",variant:"contained"},o.default.createElement("span",null,"Import as New")),o.default.createElement(f.Button,{disabled:!y,onClick:function(){return r(void 0,void 0,void 0,(function(){var e;return a(this,(function(n){switch(n.label){case 0:m(!1),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,Promise.all(y.map((function(e){return B.update(t,{id:e.id,data:e})})))];case 2:return n.sent(),C("Imported "+v),[3,4];case 3:return e=n.sent(),C("Error importing "+v+", "+e),[3,4];case 4:return[2]}}))}))},color:"primary",variant:"contained"},o.default.createElement("span",null,"Import as Overwrite")))))}},943:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,l){function o(e){try{i(r.next(e))}catch(t){l(t)}}function u(e){try{i(r.throw(e))}catch(t){l(t)}}function i(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,u)}i((r=r.apply(e,t||[])).next())}))},l=this&&this.__generator||function(e,t){var n,r,a,l,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return l={next:u(0),throw:u(1),return:u(2)},"function"===typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function u(l){return function(u){return function(l){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&l[0]?r.return:l[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,l[1])).done)return a;switch(r=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,r=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===l[0]||2===l[0])){o=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){o.label=l[1];break}if(6===l[0]&&o.label<a[1]){o.label=a[1],a=l;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(l);break}a[2]&&o.ops.pop(),o.trys.pop();continue}l=t.call(e,o)}catch(u){l=[6,u],r=0}finally{n=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,u])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=n(944),i=o(n(945)),c=o(n(967));function s(e,t){return void 0===t&&(t={}),a(this,void 0,void 0,(function(){var n;return l(this,(function(a){return n={},!!t&&"object"===typeof t&&(n=t),[2,new Promise((function(t,a){return u.parse(e,r(r({delimiter:",",skipEmptyLines:!0},n),{complete:function(e){return t(e.data)},error:function(e){return a(e)}}))}))]}))}))}function f(e){var t=e[0];return e.slice(1).map((function(e){var n={};return t.forEach((function(t,r){n=function(e,t,n){var r=i.default(t.split("."));return c.default(r,(function(){return n}),e||{})}(n,t,e[r])})),n}))}t.processCsvFile=function(e,t){return void 0===t&&(t={}),a(this,void 0,void 0,(function(){return l(this,(function(n){switch(n.label){case 0:return e?[4,s(e,t)]:[2];case 1:return[2,f(n.sent())]}}))}))},t.getCsvData=s,t.processCsvData=f},968:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),l=n(18),o=n.n(l),u=n(582),i=n(563),c=n(640),s=n(88),f=n(200),d=n(196),p=n(94),m=n(485),h=n(482),v=n(481),b=n(156),E=n(350),y=n(300),g=n(348),w=n(93),_=n(155),x=n(591),k=n(480),C=function(e){var t=e.className,n=e.basePath;return r.createElement(s.a,{className:t},r.createElement(k.a,{basePath:n}),r.createElement(x.ImportButton,Object.assign({},e,{logging:"true"})))},B=function(e){return r.createElement(f.b,Object.assign({},e,{actions:r.createElement(C,null)}),r.createElement(d.a,null,r.createElement(p.a,{source:"id"}),r.createElement(p.a,{source:"title"}),r.createElement(m.a,{label:""}),r.createElement(h.a,{label:""}),r.createElement(v.a,{label:"",redirect:!1})))},P=function(e){return r.createElement(b.b,e,r.createElement(E.a,null,r.createElement(p.a,{source:"id"}),r.createElement(p.a,{source:"title"})))},I=function(e){return r.createElement(y.b,e,r.createElement(g.a,null,r.createElement(w.a,{source:"id"}),r.createElement(w.a,{source:"title"})))},S=function(e){return r.createElement(_.b,e,r.createElement(g.a,null,r.createElement(w.a,{disabled:!0,source:"id"}),r.createElement(w.a,{source:"title"})))},D=Object(c.a)({posts:[{id:0,title:"Hello, world!"},{id:1,title:"FooBar"},{id:2,title:"Another"},{id:3,title:"Thing"}]}),O=function(){return a.a.createElement(u.a,{dataProvider:D},a.a.createElement(i.a,{name:"posts",list:B,show:P,edit:S,create:I}))};o.a.render(a.a.createElement(O,null),document.getElementById("root"))}},[[664,1,2]]]);
//# sourceMappingURL=main.e88ea1d9.chunk.js.map